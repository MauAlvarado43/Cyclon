{"version":3,"sources":["../../src/routes/investigator.js"],"names":["router","get","req","res","language","acceptsLanguages","assets","JSON","parse","fs","readFileSync","path","join","__dirname","user","redirect","render","title","titles","home","context","module","exports"],"mappings":";;AAAA;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,SAAS,sBAAf;;AAEA;;;;AAIAA,OAAOC,GAAP,CAAW,UAAX,EAAuB,UAACC,GAAD,EAAKC,GAAL,EAAa;;AAEhC,QAAIC,WAAWF,IAAIG,gBAAJ,CAAqB,IAArB,EAA2B,IAA3B,CAAf;AACA,QAAI,CAACD,QAAL,EAAeA,WAAW,IAAX;;AAEf,QAAIE,SAASC,KAAKC,KAAL,CAAWC,aAAGC,YAAH,CAAgBC,eAAKC,IAAL,CAAUC,SAAV,EAAoB,eAAaT,QAAb,GAAsB,OAA1C,CAAhB,EAAmE,OAAnE,CAAX,CAAb;;AAEA,QAAG,CAACF,IAAIY,IAAR,EACIX,IAAIY,QAAJ,CAAa,GAAb,EADJ,KAGIZ,IAAIa,MAAJ,CAAW,SAAX,EAAsB;AAClBC,6BAAmBX,OAAOY,MAAP,CAAcC,IADf;AAElBb,gBAAQA,MAFU;AAGlBK,cAAM,UAHY;AAIlBS,iBAASlB,IAAIY;AAJK,KAAtB;AAMP,CAhBD;;AAkBAO,OAAOC,OAAP,GAAiBtB,MAAjB","file":"investigator.js","sourcesContent":["import {Router} from 'express'\r\nimport passport from 'passport'\r\nimport path from 'path'\r\nimport fs from 'fs'\r\n\r\nconst router = Router()\r\n\r\n/***************************************\r\n                Rendering\r\n***************************************/\r\n\r\nrouter.get('/records', (req,res) => {\r\n\r\n    let language = req.acceptsLanguages('es', 'en')\r\n    if (!language) language = 'en' \r\n\r\n    let assets = JSON.parse(fs.readFileSync(path.join(__dirname,'../assets/'+language+'.json'),'utf-8'))\r\n\r\n    if(!req.user)\r\n        res.redirect('/')\r\n    else\r\n        res.render('records', {\r\n            title: `Cyclon - ${assets.titles.home}`, \r\n            assets: assets,\r\n            path: '/records',\r\n            context: req.user\r\n        })\r\n})\r\n\r\nmodule.exports = router"]}