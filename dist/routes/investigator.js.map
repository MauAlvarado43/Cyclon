{"version":3,"file":"investigator.js","names":["router","Router","get","req","res","language","acceptsLanguages","assets","JSON","parse","fs","readFileSync","path","join","__dirname","user","type","redirect","render","title","titles","records","context","module","exports"],"sources":["../../src/routes/investigator.js"],"sourcesContent":["import {Router} from 'express'\r\nimport path from 'path'\r\nimport fs from 'fs'\r\n\r\nconst router = Router()\r\n\r\n/***************************************\r\n                Rendering\r\n***************************************/\r\n\r\nrouter.get('/records', (req,res) => {\r\n\r\n    let language = req.acceptsLanguages('es', 'en')\r\n    if (!language) language = 'en' \r\n\r\n    let assets = JSON.parse(fs.readFileSync(path.join(__dirname,'../assets/'+language+'.json'),'utf-8'))\r\n\r\n    if(!req.user || req.user.type==0)\r\n        res.redirect('/')\r\n    else\r\n        res.render('records', {\r\n            title: `Cyclon - ${assets.titles.records}`, \r\n            assets: assets,\r\n            path: '/records',\r\n            context: req.user\r\n        })\r\n})\r\n\r\nmodule.exports = router"],"mappings":";;AAAA;;AACA;;AACA;;;;AAEA,IAAMA,MAAM,GAAG,IAAAC,eAAA,GAAf;AAEA;AACA;AACA;;AAEAD,MAAM,CAACE,GAAP,CAAW,UAAX,EAAuB,UAACC,GAAD,EAAKC,GAAL,EAAa;EAEhC,IAAIC,QAAQ,GAAGF,GAAG,CAACG,gBAAJ,CAAqB,IAArB,EAA2B,IAA3B,CAAf;EACA,IAAI,CAACD,QAAL,EAAeA,QAAQ,GAAG,IAAX;EAEf,IAAIE,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWC,cAAA,CAAGC,YAAH,CAAgBC,gBAAA,CAAKC,IAAL,CAAUC,SAAV,EAAoB,eAAaT,QAAb,GAAsB,OAA1C,CAAhB,EAAmE,OAAnE,CAAX,CAAb;EAEA,IAAG,CAACF,GAAG,CAACY,IAAL,IAAaZ,GAAG,CAACY,IAAJ,CAASC,IAAT,IAAe,CAA/B,EACIZ,GAAG,CAACa,QAAJ,CAAa,GAAb,EADJ,KAGIb,GAAG,CAACc,MAAJ,CAAW,SAAX,EAAsB;IAClBC,KAAK,qBAAcZ,MAAM,CAACa,MAAP,CAAcC,OAA5B,CADa;IAElBd,MAAM,EAAEA,MAFU;IAGlBK,IAAI,EAAE,UAHY;IAIlBU,OAAO,EAAEnB,GAAG,CAACY;EAJK,CAAtB;AAMP,CAhBD;AAkBAQ,MAAM,CAACC,OAAP,GAAiBxB,MAAjB"}